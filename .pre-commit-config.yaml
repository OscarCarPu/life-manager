repos:
  # General hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: trailing-whitespace
        name: remove trailing whitespace
      - id: end-of-file-fixer
        name: ensure file ends with a newline
      - id: check-yaml
        name: check YAML files
      - id: check-added-large-files
        name: check for large files
        exclude: ^docs/versions/.*\.svg$
      - id: check-case-conflict
        name: check for case conflicts in filenames
      - id: detect-private-key
        name: detect private keys in files
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        name: detect secrets in code
        args: ["--baseline", ".secrets.baseline"]
  # Python linting hooks (specific to each backend)
  - repo: https://github.com/PyCQA/flake8
    rev: 7.3.0
    hooks:
      - id: flake8
        name: lint FastAPI Python files
        files: ^backend/fastapi/.*\.py$
        args: ["--max-line-length=100", "--extend-ignore=E203,W503"]
      - id: flake8
        name: lint Flask Python files
        files: ^backend/flask/.*\.py$
        args: ["--max-line-length=100", "--extend-ignore=E203,W503"]
      - id: flake8
        name: lint common Python files
        files: ^backend/common/.*\.py$
        args: ["--max-line-length=100", "--extend-ignore=E203,W503"]
  # Python formatting hooks (shared across all backend code)
  - repo: https://github.com/PyCQA/isort
    rev: 6.0.1
    hooks:
      - id: isort
        name: sort Python imports
        files: ^backend/.*\.py$
        args: ["--profile", "black"]
  - repo: https://github.com/psf/black
    rev: 25.1.0
    hooks:
      - id: black
        name: format Python files
        files: ^backend/.*\.py$
        args: ["--line-length", "100"]
  # SQL hooks
  - repo: https://github.com/sqlfluff/sqlfluff
    rev: 3.4.2
    hooks:
      - id: sqlfluff-fix
        name: format SQL files
        files: '\.(sql)$'
        args: ["--dialect", "postgres"]
      - id: sqlfluff-lint
        name: lint SQL files
        files: '\.(sql)$'
        args: ["--dialect", "postgres"]
  # Frontend hooks for Flask templates and static files
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8
    hooks:
      - id: prettier
        name: format HTML, CSS, and JS files
        files: ^backend/flask/(templates|static)/.*\.(html|css|js)$
        args: ["--tab-width", "2"]
