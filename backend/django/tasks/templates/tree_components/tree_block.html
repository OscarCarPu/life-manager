{% comment %}
This template is used to render a block of nodes in a tree structure recursively.
- 'nodes': list of nodes of the tree
- 'is_root': boolean to check for adjusting styles
{% endcomment %}

{% for node in nodes %}
    {% if is_root %}
        <div class="col-12 col-md-6 col-lg-4 col-xl-3 mb-4">
    {% else %}
        <div class="col-12 col-sm-6 col-md-12 col-lg-6 mb-3">
    {% endif %}
    <div class="card category-card h-100 shadow-sm rounded-lg p-4" style="border-color: {{ node.category.color|default:'#dee2e6' }};">
        <h4 class="card-title mb-3 fw-bold text-dark">
            {{ node.category.name }}
        </h4>

        {% if node.category.projects and node.category.projects.count > 0 %}
            <div class="mb-3">
                <h6 class="text-muted mb-2">Projects:</h6>
                {% for project in node.category.projects.all %}
                    <a href="#" class="d-block project-link" style="border-left-color: {{ project.color|default:'#6c757d' }};">
                        {{ project.name }}
                    </a>
                {% endfor %}
            </div>
        {% endif %}

        {% if node.subcategories and node.subcategories|length > 0 %}
            <div class="mt-3 pt-3 border-top border-light">
                <div class="row g-3">
                    {% include "tree_components/tree_block.html" with nodes=node.subcategories is_root=False %}
                </div>
            </div>
        {% endif %}
    </div>
    </div>
{% endfor %}
